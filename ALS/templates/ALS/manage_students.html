{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Students | Smart Library</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 font-sans">

  <div class="container mx-auto mt-12 px-4">
    <!-- Header & Search -->
    <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
      <h1 class="text-4xl font-bold text-gray-800">Manage Students</h1>
      <div class="relative w-full md:w-1/3">
        <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        <input 
          type="text" 
          id="searchInput"
          placeholder="Search by ID, Name, or Email..." 
          class="w-full px-10 py-3 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
      </div>
    </div>

    <!-- Table Card -->
    <div class="bg-white shadow-2xl rounded-3xl overflow-hidden">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm uppercase tracking-wider">
          <tr>
            <th class="py-3 px-6">Student ID</th>
            <th class="py-3 px-6">Full Name</th>
            <th class="py-3 px-6">Email</th>
            <th class="py-3 px-6 text-center">Actions</th>
          </tr>
        </thead>
        <tbody class="text-gray-700 text-sm">
          {% for student in students %}
          <tr class="hover:bg-gray-50 hover:shadow-md transition-all">
            <td class="py-4 px-6 font-medium">{{ student.username }}</td>
            <td class="py-4 px-6">
              {% if student.first_name or student.last_name %}
                {{ student.first_name }} {{ student.last_name }}
              {% else %}
                <span class="text-gray-400 italic">No name</span>
              {% endif %}
            </td>
            <td class="py-4 px-6">
              {% if student.email %}
                {{ student.email }}
              {% else %}
                <span class="text-red-500 font-medium">No email</span>
              {% endif %}
            </td>
            <td class="py-4 px-6 text-center">
              <button class="flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-sm px-4 py-2 rounded-xl shadow-lg transition duration-200">
                <i class="fa fa-eye"></i> View
              </button>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="py-4 px-6 text-center text-gray-500">No students found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Search Script -->
  <script>
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function() {
      const filter = this.value.toLowerCase();
      const rows = document.querySelectorAll('tbody tr');
      rows.forEach(row => {
        const id = row.cells[0]?.textContent.toLowerCase() || '';
        const name = row.cells[1]?.textContent.toLowerCase() || '';
        const email = row.cells[2]?.textContent.toLowerCase() || '';
        row.style.display = id.includes(filter) || name.includes(filter) || email.includes(filter) ? '' : 'none';
      });
    });
  </script>

</body>
</html>
